(()=>{var b=Object.create;var s=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty;var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),w=(t,e)=>{for(var o in e)s(t,o,{get:e[o],enumerable:!0})},f=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of I(e))!V.call(t,n)&&n!==o&&s(t,n,{get:()=>e[n],enumerable:!(r=x(e,n))||r.enumerable});return t};var m=(t,e,o)=>(o=t!=null?b(g(t)):{},f(e||!t||!t.__esModule?s(o,"default",{value:t,enumerable:!0}):o,t)),R=t=>f(s({},"__esModule",{value:!0}),t);var a=j((k,p)=>{p.exports=shelter.solidWeb});var L={};w(L,{insertTimer:()=>c,onLoad:()=>q,onUnload:()=>K});var u=m(a(),1);var d=m(a(),1),S=m(a(),1);var $=(0,d.template)("<p></p>",2),{solid:{createSignal:D,onCleanup:A},plugin:{store:E}}=shelter;function v(t){let e=Math.floor(t/3600),o=Math.floor(t/60)-e*60,r=Math.floor(t-e*3600-o*60);return(e?e.toString()+":":"")+o.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")}var h=()=>{let t=()=>Date.now()/1e3-E.joinTime,[e,o]=D(v(t())),r=setInterval(()=>{o(v(t()))},1e3);return A(()=>{clearInterval(r),c()}),(()=>{let n=$.cloneNode(!0);return n.style.setProperty("display","inline"),n.style.setProperty("font-family","monospace"),(0,S.insert)(n,()=>e()+" \u2022 "),n})()};var{flux:{dispatcher:_,awaitStore:M},ui:{ReactiveRoot:P},plugin:{store:i},observeDom:U}=shelter,C='[class^="rtcConnectionStatus"] + a > div[class*="subtext"]:not(:has(.ioj4-vct))',l=!1;async function c(){if(l||!i.isInVC)return;l=!0;let t=document.querySelector(C)??await new Promise(o=>{let r=U(C,o);setTimeout(()=>{r(),o()},2e3)});if(!t){l=!1;return}let e=(0,u.createComponent)(P,{get children(){return(0,u.createComponent)(h,{})}});e.className="ioj4-vct",t.prepend(e),l=!1}function T(){i.isInVC||(i.isInVC=!0,i.joinTime=Date.now()/1e3),c()}function y(t){t.event==="join_voice_channel"?T():t.event==="leave_voice_channel"&&(i.isInVC=!1)}async function q(){(await M("VoiceStateStore")).isCurrentClientInVoiceChannel()&&T(),_.subscribe("TRACK",y)}function K(){i.isInVC=!1,_.unsubscribe("TRACK",y),document.querySelectorAll(".ioj4-vct").forEach(t=>t.remove())}return R(L);})();

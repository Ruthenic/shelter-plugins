(()=>{var T=Object.create;var s=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var A=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),N=(n,t)=>{for(var i in t)s(n,i,{get:t[i],enumerable:!0})},l=(n,t,i,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of x(t))!S.call(n,o)&&o!==i&&s(n,o,{get:()=>t[o],enumerable:!(e=q(t,o))||e.enumerable});return n};var c=(n,t,i)=>(i=n!=null?T(I(n)):{},l(t||!n||!n.__esModule?s(i,"default",{value:n,enumerable:!0}):i,n)),P=n=>l(s({},"__esModule",{value:!0}),n);var r=A((E,u)=>{u.exports=shelter.solidWeb});var U={};N(U,{onLoad:()=>k,onUnload:()=>O});var y=c(r(),1);var d="._indicator_1obqu_1{margin-left:4px}._indicator_1obqu_1 span{height:6px;width:6px;float:left;margin:0 1px;background-color:var(--text-normal);display:block;border-radius:50%;opacity:.3}._indicator_1obqu_1 span:nth-child(1){animation:1s ease-in 0.2s _typingAnimation_1obqu_1;animation-iteration-count:infinite}._indicator_1obqu_1 span:nth-child(2){animation:1s ease-in 0.4s _typingAnimation_1obqu_1;animation-iteration-count:infinite}._indicator_1obqu_1 span:nth-child(3){animation:1s ease-in 0.6s _typingAnimation_1obqu_1;animation-iteration-count:infinite}@keyframes _typingAnimation_1obqu_1{33.3%{opacity:1;transform:scale(1.2)}}",a={indicator:"_indicator_1obqu_1",typingAnimation:"_typingAnimation_1obqu_1"};var f=c(r(),1),b=c(r(),1),h=c(r(),1);var $=(0,f.template)("<div><span></span><span></span><span></span></div>",8),g=()=>(()=>{let n=$.cloneNode(!0);return(0,h.effect)(()=>(0,b.className)(n,a.indicator)),n})();var{ui:{injectCss:v},flux:{stores:{UserStore:G,TypingStore:Y},dispatcher:p},solidWeb:{render:C}}=shelter;function _(n){if(n?.userId===G?.getCurrentUser()?.id)return;let t=document.querySelector(`[data-list-item-id="channels___${n?.channelId}"]`)?.parentElement;if(!t)return;let i=t.querySelector('div[class^="children-"]');if(i)switch(n?.type){case"TYPING_START":if(!i.querySelector(`.${a.indicator}`)){let e=document.createElement("div");i.prepend(e),C(()=>(0,y.createComponent)(g,{}),e)}case"TYPING_STOP":{let e=i.querySelector(`.${a.indicator}`);e&&Object.keys(Y.getTypingUsers(n?.channelId)).length===0&&e.remove()}}}var m;function k(){p.subscribe("TYPING_START",_),p.subscribe("TYPING_STOP",_),m=v(d)}function O(){p.unsubscribe("TYPING_START",_),p.unsubscribe("TYPING_STOP",_),m&&m()}return P(U);})();

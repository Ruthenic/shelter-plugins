(()=>{var O=Object.create;var p=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),z=(e,t)=>{for(var r in t)p(e,r,{get:t[r],enumerable:!0})},$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of M(t))!F.call(e,i)&&i!==r&&p(e,i,{get:()=>t[i],enumerable:!(n=W(t,i))||n.enumerable});return e};var a=(e,t,r)=>(r=e!=null?O(j(e)):{},$(t||!e||!e.__esModule?p(r,"default",{value:e,enumerable:!0}):r,e)),D=e=>$(p({},"__esModule",{value:!0}),e);var s=q((ne,E)=>{E.exports=shelter.solidWeb});var re={};z(re,{onLoad:()=>ee,onUnload:()=>te,settings:()=>I});var S=a(s(),1);var k="._container_10otp_1{display:flex;justify-content:center;pointer-events:none !important}._wrapper_10otp_1{position:relative;pointer-events:initial}._imageWrapper_10otp_1{display:block;position:relative;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow:hidden;border-radius:3px}._image_10otp_1{object-fit:contain;min-height:480px;max-width:82vw;max-height:82vh}._downloadLink_10otp_1{font-size:14px;font-weight:500;display:inline-block;color:var(--white-500) !important;text-decoration:none;line-height:30px;-webkit-transition:opacity .15s ease;transition:opacity .15s ease;opacity:.5;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0}._downloadLink_10otp_1:hover{opacity:1;text-decoration:underline}",l={container:"_container_10otp_1",wrapper:"_wrapper_10otp_1",imageWrapper:"_imageWrapper_10otp_1",image:"_image_10otp_1",downloadLink:"_downloadLink_10otp_1"};var R=a(s(),1),c=a(s(),1),y=a(s(),1),d=a(s(),1);var H=(0,R.template)('<div><div><div><img ioj4-opi></div><a rel="noreferrer noopener" target="_blank" tabindex="0">Open in Browser'),{plugin:{store:K}}=shelter,C=e=>{e.url.searchParams.set("size",K.fullResolution?"4096":"480");let t=e.url.toString();e.url.searchParams.set("size","4096");let r=e.url.toString().replace(/\.(webp)($|\?)/,".png$2");return(()=>{let n=H(),i=n.firstChild,_=i.firstChild,f=_.firstChild,v=_.nextSibling;return(0,d.setAttribute)(f,"src",t),(0,d.setAttribute)(v,"href",r),(0,y.effect)(o=>{let b=l.container,g=l.wrapper,x=l.imageWrapper,h=l.image,w=l.downloadLink;return b!==o._v$&&(0,c.className)(n,o._v$=b),g!==o._v$2&&(0,c.className)(i,o._v$2=g),x!==o._v$3&&(0,c.className)(_,o._v$3=x),h!==o._v$4&&(0,c.className)(f,o._v$4=h),w!==o._v$5&&(0,c.className)(v,o._v$5=w),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})()};var U=a(s(),1),{plugin:{store:L},ui:{SwitchItem:B}}=shelter,I=()=>(0,U.createComponent)(B,{get value(){return L.fullResolution},onChange:e=>{L.fullResolution=e},children:"Display images in their full resolution"});var{plugin:{store:Q},flux:{dispatcher:u,intercept:X},ui:{openModal:Y,injectCss:G},observeDom:J}=shelter;function V(e){let t=e.querySelector('div[class*="bannerPremium-"]');t&&(t.addEventListener("click",r=>P(r?.target?.style?.backgroundImage?.slice(5,-2))),t.style.cursor="pointer"),e.querySelectorAll('div[class*="wrapper-"]').forEach(r=>{avatarWrapper=r.parentElement.parentElement,!(avatarWrapper.className.includes("clickable-")&&avatarWrapper.onclick)&&(r.addEventListener("click",n=>P(n?.target?.querySelector('img[class*="avatar"]')?.src)),r.style.cursor="pointer")})}function P(e){e&&Y(()=>(0,S.createComponent)(C,{url:new URL(e)}))}var Z='[class*="userProfileModalInner"],[class*="userPopoutInner"]';function m(){let e=J(Z,t=>{e(),queueMicrotask(V.bind(null,t))});setTimeout(e,1e3)}function T(e){(e.event==="open_popout"||e.event==="open_modal")&&m()}var A,N;function ee(){A=G(k),N=X(e=>{if(e?.type==="CONTEXT_MENU_OPEN"&&e?.contextMenu?.target?.hasAttribute("ioj4-opi"))return!1}),Q.fullResolution??=!1,u.subscribe("TRACK",T),u.subscribe("USER_PROFILE_FETCH_FAILURE",m)}function te(){u.unsubscribe("TRACK",T),u.unsubscribe("USER_PROFILE_FETCH_FAILURE",m),A(),N()}return D(re);})();

(()=>{var P=Object.create;var u=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),z=(e,t)=>{for(var o in t)u(e,o,{get:t[o],enumerable:!0})},$=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of M(t))!j.call(e,i)&&i!==o&&u(e,i,{get:()=>t[i],enumerable:!(n=W(t,i))||n.enumerable});return e};var s=(e,t,o)=>(o=e!=null?P(F(e)):{},$(t||!e||!e.__esModule?u(o,"default",{value:e,enumerable:!0}):o,e)),D=e=>$(u({},"__esModule",{value:!0}),e);var a=q((ne,E)=>{E.exports=shelter.solidWeb});var oe={};z(oe,{onLoad:()=>ee,onUnload:()=>te,settings:()=>I});var S=s(a(),1);var k="._container_1o05a_1{display:flex;justify-content:center;pointer-events:none}._wrapper_1o05a_1{position:relative;pointer-events:initial}._imageWrapper_1o05a_1{display:block;position:relative;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow:hidden;border-radius:3px}._image_1o05a_1{min-width:512px;max-width:82vw;max-height:82vh}._downloadLink_1o05a_1{font-size:14px;font-weight:500;display:inline-block;color:var(--white-500) !important;text-decoration:none;line-height:30px;-webkit-transition:opacity .15s ease;transition:opacity .15s ease;opacity:.5;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0}._downloadLink_1o05a_1:hover{opacity:1;text-decoration:underline}",l={container:"_container_1o05a_1",wrapper:"_wrapper_1o05a_1",imageWrapper:"_imageWrapper_1o05a_1",image:"_image_1o05a_1",downloadLink:"_downloadLink_1o05a_1"};var R=s(a(),1),c=s(a(),1),y=s(a(),1),d=s(a(),1);var H=(0,R.template)('<div><div><div><img ioj4-opi></div><a rel="noreferrer noopener" target="_blank" tabindex="0">Open in Browser</a></div></div>',9),{plugin:{store:K}}=shelter,C=e=>{e.url.searchParams.set("size",K.fullResolution?"4096":"512");let t=e.url.toString();e.url.searchParams.set("size","4096");let o=e.url.toString();return(()=>{let n=H.cloneNode(!0),i=n.firstChild,_=i.firstChild,f=_.firstChild,v=_.nextSibling;return(0,d.setAttribute)(f,"src",t),(0,d.setAttribute)(v,"href",o),(0,y.effect)(r=>{let g=l.container,b=l.wrapper,x=l.imageWrapper,h=l.image,w=l.downloadLink;return g!==r._v$&&(0,c.className)(n,r._v$=g),b!==r._v$2&&(0,c.className)(i,r._v$2=b),x!==r._v$3&&(0,c.className)(_,r._v$3=x),h!==r._v$4&&(0,c.className)(f,r._v$4=h),w!==r._v$5&&(0,c.className)(v,r._v$5=w),r},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})()};var U=s(a(),1),{plugin:{store:L},ui:{SwitchItem:B}}=shelter,I=()=>(0,U.createComponent)(B,{get value(){return L.fullResolution},onChange:e=>{L.fullResolution=e},children:"Display images in their full resolution"});var{plugin:{store:Q},flux:{dispatcher:p,intercept:X},ui:{openModal:Y,injectCss:G},observeDom:J}=shelter;function V(e){console.log(e);let t=e.querySelector('div[class*="banner-"]');t&&(t.addEventListener("click",o=>N(o?.target?.style?.backgroundImage?.slice(5,-2))),t.style.cursor="pointer"),e.querySelectorAll('div[class*="wrapper-"]').forEach(o=>{avatarWrapper=o.parentElement.parentElement,!(avatarWrapper.className.includes("clickable-")&&avatarWrapper.onclick)&&(o.addEventListener("click",n=>N(n?.target?.querySelector('img[class*="avatar"]')?.src)),o.style.cursor="pointer")})}function N(e){e&&Y(()=>(0,S.createComponent)(C,{url:new URL(e)}))}var Z='[class*="userProfileModalInner"],[class*="userPopoutInner"]';function m(){let e=J(Z,t=>{e(),queueMicrotask(V.bind(null,t))});setTimeout(e,1e3)}function T(e){(e.event==="open_popout"||e.event==="open_modal")&&m()}var A,O;function ee(){A=G(k),O=X(e=>{if(e?.type==="CONTEXT_MENU_OPEN"&&e?.contextMenu?.target?.hasAttribute("ioj4-opi"))return!1}),Q.fullResolution??=!1,p.subscribe("TRACK",T),p.subscribe("USER_PROFILE_FETCH_FAILURE",m)}function te(){p.unsubscribe("TRACK",T),p.unsubscribe("USER_PROFILE_FETCH_FAILURE",m),A(),O()}return D(oe);})();

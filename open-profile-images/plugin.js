(()=>{var T=Object.create;var p=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var W=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),j=(e,t)=>{for(var r in t)p(e,r,{get:t[r],enumerable:!0})},$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of O(t))!M.call(e,i)&&i!==r&&p(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var s=(e,t,r)=>(r=e!=null?T(W(e)):{},$(t||!e||!e.__esModule?p(r,"default",{value:e,enumerable:!0}):r,e)),q=e=>$(p({},"__esModule",{value:!0}),e);var a=F((te,E)=>{E.exports=shelter.solidWeb});var Z={};j(Z,{onLoad:()=>J,onUnload:()=>V,settings:()=>U});var N=s(a(),1);var k=s(a(),1),c=s(a(),1),R=s(a(),1),d=s(a(),1);shelter.plugin.scoped.ui.injectCss("._container_10otp_1{display:flex;justify-content:center;pointer-events:none !important}._wrapper_10otp_1{position:relative;pointer-events:initial}._imageWrapper_10otp_1{display:block;position:relative;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow:hidden;border-radius:3px}._image_10otp_1{object-fit:contain;min-height:480px;max-width:82vw;max-height:82vh}._downloadLink_10otp_1{font-size:14px;font-weight:500;display:inline-block;color:var(--white-500) !important;text-decoration:none;line-height:30px;-webkit-transition:opacity .15s ease;transition:opacity .15s ease;opacity:.5;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0}._downloadLink_10otp_1:hover{opacity:1;text-decoration:underline}");var l={container:"_container_10otp_1",wrapper:"_wrapper_10otp_1",imageWrapper:"_imageWrapper_10otp_1",image:"_image_10otp_1",downloadLink:"_downloadLink_10otp_1"};var z=(0,k.template)('<div><div><div><img ioj4-opi></div><a rel="noreferrer noopener" target="_blank" tabindex="0">Open in Browser</a></div></div>',9),{plugin:{store:D}}=shelter,y=e=>{e.url.searchParams.set("size",D.fullResolution?"4096":"480");let t=e.url.toString();e.url.searchParams.set("size","4096");let r=e.url.toString().replace(/\.(webp)($|\?)/,".png$2");return(()=>{let n=z.cloneNode(!0),i=n.firstChild,_=i.firstChild,f=_.firstChild,v=_.nextSibling;return(0,d.setAttribute)(f,"src",t),(0,d.setAttribute)(v,"href",r),(0,R.effect)(o=>{let g=l.container,b=l.wrapper,h=l.imageWrapper,x=l.image,w=l.downloadLink;return g!==o._v$&&(0,c.className)(n,o._v$=g),b!==o._v$2&&(0,c.className)(i,o._v$2=b),h!==o._v$3&&(0,c.className)(_,o._v$3=h),x!==o._v$4&&(0,c.className)(f,o._v$4=x),w!==o._v$5&&(0,c.className)(v,o._v$5=w),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})()};var L=s(a(),1),{plugin:{store:C},ui:{SwitchItem:H}}=shelter,U=()=>(0,L.createComponent)(H,{get value(){return C.fullResolution},onChange:e=>{C.fullResolution=e},children:"Display images in their full resolution"});var{plugin:{store:K},flux:{dispatcher:u,intercept:B},ui:{openModal:Q},observeDom:X}=shelter;function Y(e){let t=e.querySelector('div[class*="bannerPremium_"]');t&&(t.addEventListener("click",r=>I(r?.target?.style?.backgroundImage?.slice(5,-2))),t.style.cursor="pointer"),e.querySelectorAll('div[class*="wrapper_"]').forEach(r=>{avatarWrapper=r.parentElement.parentElement,!(avatarWrapper.className.includes("clickable_")&&avatarWrapper.onclick)&&(r.addEventListener("click",n=>I(n?.target?.querySelector('img[class*="avatar"]')?.src)),r.style.cursor="pointer")})}function I(e){e&&Q(()=>(0,N.createComponent)(y,{url:new URL(e)}))}var G='[class*="userProfileModalInner"],[class*="userPopoutInner"]';function m(){let e=X(G,t=>{e(),queueMicrotask(Y.bind(null,t))});setTimeout(e,1e3)}function P(e){(e.event==="open_popout"||e.event==="open_modal")&&m()}var S;function J(){S=B(e=>{if(e?.type==="CONTEXT_MENU_OPEN"&&e?.contextMenu?.target?.hasAttribute("ioj4-opi"))return!1}),K.fullResolution??=!1,u.subscribe("TRACK",P),u.subscribe("USER_PROFILE_FETCH_FAILURE",m)}function V(){u.unsubscribe("TRACK",P),u.unsubscribe("USER_PROFILE_FETCH_FAILURE",m),S()}return q(Z);})();

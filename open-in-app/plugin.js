(()=>{var h=Object.create;var s=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),v=(e,t)=>{for(var o in t)s(e,o,{get:t[o],enumerable:!0})},c=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of A(t))!x.call(e,n)&&n!==o&&s(e,n,{get:()=>t[n],enumerable:!(a=b(t,n))||a.enumerable});return e};var y=(e,t,o)=>(o=e!=null?h(g(e)):{},c(t||!e||!e.__esModule?s(o,"default",{value:e,enumerable:!0}):o,e)),C=e=>c(s({},"__esModule",{value:!0}),e);var m=w(($,i)=>{i.exports=shelter.solidWeb});var E={};v(E,{apps:()=>r,onLoad:()=>S,onUnload:()=>k,settings:()=>f});var u=y(m(),1);var{plugin:{store:l},ui:{SwitchItem:L}}=shelter,f=()=>{let e=[];for(let t of r)e.push((0,u.createComponent)(L,{get value(){return l.enabledApps[t.name]},onChange:o=>{l.enabledApps[t.name]=o},get children(){return`${t.name} Protocol`}}));return e};var{plugin:{store:p}}=shelter,r=[{name:"Spotify",hostnames:["open.spotify.com"],protocol:"spotify:"},{name:"Steam",hostnames:["store.steampowered.com","steamcommunity.com","help.steampowered.com"],protocol:"steam://openurl/"}];function d({target:e}){if(e.tagName!=="A")return;let t=new URL(e.getAttribute("href"));for(let o of r)if(p.enabledApps[o.name]&&o.hostnames.includes(t.hostname)){e.setAttribute("href",o.protocol+t),setTimeout(()=>{e.setAttribute("href",t.toString())});return}}function S(){p.enabledApps??={},r.forEach(e=>{p.enabledApps[e.name]??=!0}),document.addEventListener("click",d)}function k(){document.removeEventListener("click",d)}return C(E);})();

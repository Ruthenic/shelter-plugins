(()=>{var A=Object.create;var s=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),U=(t,e)=>{for(var o in e)s(t,o,{get:e[o],enumerable:!0})},l=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of L(e))!E.call(t,c)&&c!==o&&s(t,c,{get:()=>e[c],enumerable:!(n=x(e,c))||n.enumerable});return t};var v=(t,e,o)=>(o=t!=null?A(C(t)):{},l(e||!t||!t.__esModule?s(o,"default",{value:t,enumerable:!0}):o,t)),O=t=>l(s({},"__esModule",{value:!0}),t);var f=S((V,u)=>{u.exports=shelter.solidWeb});var M={};U(M,{apps:()=>r,onLoad:()=>I,onUnload:()=>W,settings:()=>h});var d=v(f(),1);var{plugin:{store:m},ui:{SwitchItem:N}}=shelter,h=()=>{let t=[];for(let e of Object.keys(r))t.push((0,d.createComponent)(N,{get value(){return m.enabledApps[e]},onChange:o=>{m.enabledApps[e]=o},children:`${e} Protocol`}));return t};var{plugin:{store:a},patcher:{instead:w}}=shelter,r={Spotify:{hostnames:["open.spotify.com","spotify.link"],protocol:"spotify://",default:!0},Steam:{hostnames:["store.steampowered.com","steamcommunity.com","help.steampowered.com"],protocol:"steam://openurl/",default:!0},SoundCloud:{hostnames:["soundcloud.com"],protocol:"soundpout://",default:!1}};function p(t){let{hostname:e}=new URL(t);return Object.entries(r).find(([o,n])=>n.hostnames.includes(e)&&a.enabledApps[o])}async function R(t){let e=/<meta property="og:url" content="(.+?)"\/>/,o=await(await fetch(`https://shcors.uwu.network/${t}`)).text();return e.exec(o)?.[1]}async function i(t){try{t=new URL(t),t.hostname==="spotify.link"&&(t=new URL(await R(t)));let[e,o]=p(t),n=o.protocol+t;window.open(n,"_blank").close()}catch(e){console.error("[open-in-app] Error opening in App",e)}}var y;function $(){y=w("open",window,(t,e)=>{let[o]=t;if(!p(o))return e(...t);i(o)})}var g;async function j(){g=w("click",HTMLAnchorElement.prototype,function(t,e){let{href:o}=this;if(!p(o))return e(...t);i(url)})}async function b(t){let e=t.target;try{if(e.tagName!=="A"&&(e=e?.closest(`:not(${e.tagName})`),e.tagName!=="A"))return;let{href:o}=e;if(!p(o))return;t.preventDefault(),t.stopImmediatePropagation(),i(o)}catch{}}var k=document.querySelector("#app-mount");function I(){a.enabledApps??={},Object.entries(r).forEach(([t,e])=>{console.log(t,e),a.enabledApps[t]??=e.default}),$(),j(),k.addEventListener("click",b)}function W(){y?.(),g?.(),k.removeEventListener("click",b)}return O(M);})();

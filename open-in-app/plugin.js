(()=>{var L=Object.create;var s=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var v=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports),U=(t,o)=>{for(var e in o)s(t,e,{get:o[e],enumerable:!0})},i=(t,o,e,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of C(o))!S.call(t,c)&&c!==e&&s(t,c,{get:()=>o[c],enumerable:!(n=b(o,c))||n.enumerable});return t};var A=(t,o,e)=>(e=t!=null?L(E(t)):{},i(o||!t||!t.__esModule?s(e,"default",{value:t,enumerable:!0}):e,t)),O=t=>i(s({},"__esModule",{value:!0}),t);var l=v((_,u)=>{u.exports=shelter.solidWeb});var N={};U(N,{apps:()=>r,onLoad:()=>$,onUnload:()=>M,settings:()=>h});var f=A(l(),1);var{plugin:{store:m},ui:{SwitchItem:j}}=shelter,h=()=>{let t=[];for(let[o,e]of Object.entries(r))t.push((0,f.createComponent)(j,{get value(){return m[o]},onChange:n=>{m[o]=n},get note(){return e.protocol},children:o}));return t};var{plugin:{store:d},patcher:{instead:w}}=shelter,r={Spotify:{hostnames:["open.spotify.com","spotify.link"],protocol:"spotify://",default:!0},Steam:{hostnames:["store.steampowered.com","steamcommunity.com","help.steampowered.com"],protocol:"steam://openurl/",default:!0},SoundCloud:{hostnames:["soundcloud.com","on.soundcloud.com"],protocol:"soundpout://",default:!1}};function p(t){if(!/https?:\/\//.test(t.toString()))return;let{hostname:o}=new URL(t);return Object.entries(r).find(([e,n])=>n.hostnames.includes(o)&&d[e])}async function I(t){let o=/<meta property="og:url" content="(.+?)"/,e=await(await fetch(`https://shcors.uwu.network/${t}`)).text();return o.exec(e)?.[1]}async function a(t){try{t=new URL(t),["spotify.link","on.soundcloud.com"].includes(t.hostname)&&(t=new URL(await I(t))),t.hostname==="open.spotify.com"&&(t.pathname=t.pathname.replace(/\/intl-.+?(\/.+)/i,"$1"));let[o,e]=p(t),n=e.protocol+t;window.open(n,"_blank")?.close()}catch(o){console.error("[open-in-app] Error opening in App",o)}}var y;function R(){y=w("open",window,(t,o)=>{let[e]=t;if(!p(e))return o(...t);a(e)})}var g;async function W(){g=w("click",HTMLAnchorElement.prototype,function(t,o){let{href:e}=this;if(!p(e))return o(...t);a(url)})}async function k(t){let o=t?.target?.closest("a");!o?.href||!p(o.href)||(t.preventDefault(),t.stopImmediatePropagation(),a(o.href))}var x=document.querySelector("#app-mount");function $(){Object.entries(r).forEach(([t,o])=>{d[t]??=o.default}),R(),W(),x.addEventListener("click",k)}function M(){y?.(),g?.(),x.removeEventListener("click",k)}return O(N);})();

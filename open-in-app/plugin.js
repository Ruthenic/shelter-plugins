(()=>{var L=Object.create;var p=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),N=(t,e)=>{for(var o in e)p(t,o,{get:e[o],enumerable:!0})},i=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of C(e))!A.call(t,c)&&c!==o&&p(t,c,{get:()=>e[c],enumerable:!(n=b(e,c))||n.enumerable});return t};var O=(t,e,o)=>(o=t!=null?L(E(t)):{},i(e||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t)),S=t=>i(p({},"__esModule",{value:!0}),t);var l=v((_,u)=>{u.exports=shelter.solidWeb});var M={};N(M,{apps:()=>r,onLoad:()=>R,onUnload:()=>W,settings:()=>h});var f=O(l(),1);var{plugin:{store:m},ui:{SwitchItem:U}}=shelter,h=()=>{let t=[];for(let[e,o]of Object.entries(r))t.push((0,f.createComponent)(U,{get value(){return m[e]},onChange:n=>{m[e]=n},get note(){return o.protocol},children:e}));return t};var{plugin:{store:d},patcher:{instead:w}}=shelter,r={Spotify:{hostnames:["open.spotify.com","spotify.link"],protocol:"spotify://",default:!0},Steam:{hostnames:["store.steampowered.com","steamcommunity.com","help.steampowered.com"],protocol:"steam://openurl/",default:!0},SoundCloud:{hostnames:["soundcloud.com","on.soundcloud.com"],protocol:"soundpout://",default:!1}};function a(t){let{hostname:e}=new URL(t);return Object.entries(r).find(([o,n])=>n.hostnames.includes(e)&&d[o])}async function $(t){let e=/<meta property="og:url" content="(.+?)"/,o=await(await fetch(`https://shcors.uwu.network/${t}`)).text();return e.exec(o)?.[1]}async function s(t){try{t=new URL(t),["spotify.link","on.soundcloud.com"].includes(t.hostname)&&(t=new URL(await $(t))),t.hostname==="open.spotify.com"&&(t.pathname=t.pathname.replace(/\/intl-.+?(\/.+)/i,"$1"));let[e,o]=a(t),n=o.protocol+t;window.open(n,"_blank")?.close()}catch(e){console.error("[open-in-app] Error opening in App",e)}}var y;function j(){y=w("open",window,(t,e)=>{let[o]=t;if(!a(o))return e(...t);s(o)})}var g;async function I(){g=w("click",HTMLAnchorElement.prototype,function(t,e){let{href:o}=this;if(!a(o))return e(...t);s(url)})}async function k(t){let e=t.target;try{if(e.tagName!=="A"&&(e=e?.closest(`:not(${e.tagName})`),e.tagName!=="A"))return;let{href:o}=e;if(!a(o))return;t.preventDefault(),t.stopImmediatePropagation(),s(o)}catch{}}var x=document.querySelector("#app-mount");function R(){Object.entries(r).forEach(([t,e])=>{d[t]??=e.default}),j(),I(),x.addEventListener("click",k)}function W(){y?.(),g?.(),x.removeEventListener("click",k)}return S(M);})();

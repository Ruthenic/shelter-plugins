(()=>{var L=Object.create;var s=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var v=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports),N=(t,o)=>{for(var e in o)s(t,e,{get:o[e],enumerable:!0})},i=(t,o,e,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of C(o))!A.call(t,c)&&c!==e&&s(t,c,{get:()=>o[c],enumerable:!(n=b(o,c))||n.enumerable});return t};var O=(t,o,e)=>(e=t!=null?L(E(t)):{},i(o||!t||!t.__esModule?s(e,"default",{value:t,enumerable:!0}):e,t)),S=t=>i(s({},"__esModule",{value:!0}),t);var l=v((_,u)=>{u.exports=shelter.solidWeb});var M={};N(M,{apps:()=>r,onLoad:()=>W,onUnload:()=>$,settings:()=>d});var f=O(l(),1);var{plugin:{store:m},ui:{SwitchItem:U}}=shelter,d=()=>{let t=[];for(let[o,e]of Object.entries(r))t.push((0,f.createComponent)(U,{get value(){return m[o]},onChange:n=>{m[o]=n},get note(){return e.protocol},children:o}));return t};var{plugin:{store:h},patcher:{instead:w}}=shelter,r={Spotify:{hostnames:["open.spotify.com","spotify.link"],protocol:"spotify://",default:!0},Steam:{hostnames:["store.steampowered.com","steamcommunity.com","help.steampowered.com"],protocol:"steam://openurl/",default:!0},SoundCloud:{hostnames:["soundcloud.com","on.soundcloud.com"],protocol:"soundpout://",default:!1}};function p(t){let{hostname:o}=new URL(t);return Object.entries(r).find(([e,n])=>n.hostnames.includes(o)&&h[e])}async function j(t){let o=/<meta property="og:url" content="(.+?)"/,e=await(await fetch(`https://shcors.uwu.network/${t}`)).text();return o.exec(e)?.[1]}async function a(t){try{t=new URL(t),["spotify.link","on.soundcloud.com"].includes(t.hostname)&&(t=new URL(await j(t)));let[o,e]=p(t),n=e.protocol+t;window.open(n,"_blank").close()}catch(o){console.error("[open-in-app] Error opening in App",o)}}var y;function I(){y=w("open",window,(t,o)=>{let[e]=t;if(!p(e))return o(...t);a(e)})}var g;async function R(){g=w("click",HTMLAnchorElement.prototype,function(t,o){let{href:e}=this;if(!p(e))return o(...t);a(url)})}async function k(t){let o=t.target;try{if(o.tagName!=="A"&&(o=o?.closest(`:not(${o.tagName})`),o.tagName!=="A"))return;let{href:e}=o;if(!p(e))return;t.preventDefault(),t.stopImmediatePropagation(),a(e)}catch{}}var x=document.querySelector("#app-mount");function W(){Object.entries(r).forEach(([t,o])=>{h[t]??=o.default}),I(),R(),x.addEventListener("click",k)}function $(){y?.(),g?.(),x.removeEventListener("click",k)}return S(M);})();
